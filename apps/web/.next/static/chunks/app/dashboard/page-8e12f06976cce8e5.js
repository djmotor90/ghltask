(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3462:function(e,s,t){Promise.resolve().then(t.bind(t,2431))},2431:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u},dynamic:function(){return m}});var a=t(7573),l=t(9585),r=t(1695),n=t(7582);let i=(0,n.Ue)(e=>({user:null,token:null,isLoading:!0,setUser:s=>e({user:s}),setToken:s=>{e({token:s}),localStorage.setItem("access_token",s)},logout:()=>{e({user:null,token:null}),localStorage.removeItem("access_token")}})),d=(0,n.Ue)(e=>({tasks:[],selectedTask:null,setTasks:s=>e({tasks:s}),setSelectedTask:s=>e({selectedTask:s}),addTask:s=>e(e=>({tasks:[s,...e.tasks]})),updateTask:(s,t)=>e(e=>{var a;return{tasks:e.tasks.map(e=>e.id===s?{...e,...t}:e),selectedTask:(null===(a=e.selectedTask)||void 0===a?void 0:a.id)===s?{...e.selectedTask,...t}:e.selectedTask}}),deleteTask:s=>e(e=>{var t;return{tasks:e.tasks.filter(e=>e.id!==s),selectedTask:(null===(t=e.selectedTask)||void 0===t?void 0:t.id)===s?null:e.selectedTask}})})),c=t(3908).Z.create({baseURL:"https://api.gurver.org"});c.interceptors.request.use(e=>{let s=localStorage.getItem("access_token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),c.interceptors.response.use(e=>e,async e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(localStorage.removeItem("access_token"),window.location.href="/auth/login"),Promise.reject(e)});let o={getProfile:()=>c.get("/organizations/me")},x={getAll:()=>c.get("/spaces")},m="force-dynamic";function h(){let e=(0,r.useRouter)(),s=(0,r.useSearchParams)(),[t,n]=(0,l.useState)(!0),[c,m]=(0,l.useState)([]),[h,u]=(0,l.useState)(null),[g,b]=(0,l.useState)(null),{user:j,token:p,setToken:v,logout:N}=i(),{tasks:f}=d();return((0,l.useEffect)(()=>{let e=s.get("token");e&&(v(e),window.history.replaceState({},"","/dashboard"))},[s,v]),(0,l.useEffect)(()=>{if(!p){e.push("/");return}(async function(){try{n(!0);let[e,s]=await Promise.all([o.getProfile(),x.getAll()]);b(e.data),m(s.data),s.data.length>0&&u(s.data[0])}catch(e){console.error("Failed to load data:",e)}finally{n(!1)}})()},[p,e]),t)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your workspace..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:(null==g?void 0:g.name)||"Task Manager"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome back! ",null==j?void 0:j.email]})]}),(0,a.jsx)("button",{onClick:()=>{N(),e.push("/")},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Spaces"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"+ New Space"})]}),0===c.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg border-2 border-dashed border-gray-300 p-12 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No spaces yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first workspace"}),(0,a.jsx)("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Your First Space"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>{var s;return(0,a.jsxs)("div",{onClick:()=>u(e),className:"bg-white rounded-lg p-6 cursor-pointer transition-all ".concat((null==h?void 0:h.id)===e.id?"ring-2 ring-blue-500 shadow-md":"border border-gray-200 hover:shadow-md"),children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color||"#5865F2"}}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name})]})}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,a.jsx)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:(0,a.jsxs)("span",{children:[(null===(s=e.folders)||void 0===s?void 0:s.length)||0," folders"]})})]},e.id)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg border p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Tasks"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"In Progress"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(e=>"in_progress"===e.status).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(e=>"done"===e.status).length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Spaces"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.length})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-8 text-white mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\uD83C\uDF89 Welcome to Your Task Manager!"}),(0,a.jsx)("p",{className:"mb-6 text-blue-50",children:"Your OAuth integration is working perfectly. Ready to start managing your tasks?"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCC1"}),(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"1. Create Spaces"}),(0,a.jsx)("p",{className:"text-sm text-blue-50",children:"Organize your work into separate workspaces"})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"2. Add Tasks"}),(0,a.jsx)("p",{className:"text-sm text-blue-50",children:"Create and track tasks within your spaces"})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-2xl mb-2",children:"✨"}),(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"3. Collaborate"}),(0,a.jsx)("p",{className:"text-sm text-blue-50",children:"Assign tasks and work together with your team"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Integration Status"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"✓ OAuth Authentication Working"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"✓ Connected to GoHighLevel"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"✓ Database Connected (Supabase PostgreSQL)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Task Manager UI - Coming Next!"})]})]})]})]})]})}function u(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,a.jsx)(h,{})})}}},function(e){e.O(0,[802,293,528,744],function(){return e(e.s=3462)}),_N_E=e.O()}]);